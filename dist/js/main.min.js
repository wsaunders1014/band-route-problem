import{points40,points200,points500}from"./data.js";var generatedRoute=!1;const calcDistance=(e,t,n,i)=>Math.hypot(t-e,i-n),findClosestPoint=(e,t)=>{return t.reduce((t,n,i)=>{let a=calcDistance(e.x,n.x,e.y,n.y);return null==t.distance&&(t={distance:a,index:i}),a<t.distance&&(t={distance:a,index:i,coords:{x:n.x,y:n.y}}),t},{distance:null,index:null,coords:{}})},calcRoute=e=>{console.log("test");let t=e.slice(0),n=[t.shift()];n[0].distance=0,n[0].index=0;const i=t.length;for(let e=0;e<i;e++){let e=findClosestPoint(n[n.length-1],t),i=t.splice(e.index,1)[0];n.push({x:i.x,y:i.y,distance:e.distance,index:e.index})}return n},displayRouteTable=e=>{let t=e;for(let e=0;e<t.length;e++){let n=document.getElementById("routeData").insertRow(-1),i=n.insertCell(0),a=n.insertCell(1),s=n.insertCell(2);i.innerHTML=`${e+1}`,a.innerHTML=`${t[e].x}, ${t[e].y}`,s.innerHTML=`${t[e].distance}`}};var canvas=document.getElementById("canvas");const displayPoints=e=>{let t=canvas.getContext("2d");t.clearRect(0,0,canvas.width,canvas.height),window.innerWidth<1e3&&e.map((t,n)=>{let i=t.x/1e3,a=t.y/1e3;e[n].x=window.innerWidth*i,e[n].y=window.innerWidth*a}),t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y),t.stroke(),t.closePath(),t.beginPath();for(let n=0;n<e.length;n++)t.arc(e[n].x,e[n].y,10,0,2*Math.PI),t.fillStyle="blue",t.fill(),t.closePath()};window.addEventListener("DOMContentLoaded",()=>{window.innerWidth<1e3&&(canvas.setAttribute("width",window.innerWidth-20),canvas.setAttribute("height",window.innerWidth-20))}),window.addEventListener("resize",()=>{!1!==generatedRoute&&window.innerWidth<1e3?(canvas.setAttribute("width",window.innerWidth-20),canvas.setAttribute("height",window.innerWidth-20),setTimeout(()=>{displayPoints(generatedRoute)},50)):(canvas.setAttribute("width",1e3),canvas.setAttribute("height",1e3))});var buttons=document.getElementsByTagName("button");for(let e=0;e<buttons.length;e++)buttons[e].addEventListener("click",e=>{switch(e.target.getAttribute("id")){case"points40":generatedRoute=calcRoute(points40);break;case"points200":generatedRoute=calcRoute(points200);break;case"points500":generatedRoute=calcRoute(points500)}displayPoints(generatedRoute),displayRouteTable(generatedRoute)});